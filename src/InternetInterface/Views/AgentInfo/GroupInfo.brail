<script type="text/javascript">
	$(function () {
		$('.graph_date').datepicker();
	});
</script>
<div style="width:800px; margin:0 auto;">
<table class="table" style="border:1px solid #AAA">
	<thead>
		<tr>
			<th colspan=3>Выплаты по агентам</th>
		</tr>
		<tr>
			<form method=get>
				<td>
					<label for="startDate"><b>Начало периода</b></label>
					<input type=text value="${interval.GetStartString()}" name="interval.startDate" id="startDate" class="graph_date" class="date-pick dp-applied">
				</td>
				<td style="border-right:1px solid #AAA; padding-right:30px;">
					<label for="startDate"><b>Конец периода</b></label>
					<input type=text value="${interval.GetEndString()}" name="interval.endDate" id="endDate" class="graph_date" class="dp-hover"></div>
				</td>
				<td>
								<button id="showBut" type=submit class="button showpay">Показать</button>
				</td>
			</form>
		</tr>
	</thead>
	<tbody>
	<%for i, agent in enumerate(Agents): %>
	 <%payments = agent.GetPaymentsForInterval(interval) %>
		<tr>
			<td colspan=3 style="background-color:#D5E6D0; font-size:18px; font-weight:bold;">${agent.Name}</td>
		</tr>
		<tr>
			<td colspan=3>
				<table style="border:1px solid #AAA" class="table">
					<thead>
						<tr>
							<th colspan=3>Начисления за текущий период ${interval.GetStartString()} - ${interval.GetEndString()}</th>
						</tr>
						<tr>
							<th>Дата действия</th>
							<th>Сумма</th>
							<th>Действие</th>
						</tr>
					</thead>
					<tbody>
					<%for i, payment in enumerate(payments): %>
						<tr>
							<td>${payment.RegistrationDate.ToShortDateString()}</td>
							<td>${payment.Sum}</td>
							<td>${payment.Comment}</td>
						</tr>
					<%end %>
					</tbody>
				</table>
			</td>
		</tr>
		<tr>
			<td colspan=3>
				<table style="border:1px solid #AAA" class="table">
					<thead>
						<tr>
							<th colspan=3>Списания за текущий период</th>
						</tr>
						<tr>
							<th>Дата действия</th>
							<th>Сумма</th>
							<th>Действие</th>
						</tr>
					</thead>
					<tbody>
					<%for i, payment in enumerate(agent.GetWriteOffsForInterval(interval)): %>
						<tr>
							<td>${payment.RegistrationDate.ToShortDateString()}</td>
							<td>${payment.Sum}</td>
							<td>${payment.Comment}</td>
						</tr>
					<%end %>
					</tbody>
				</table>
			</td>
		</tr>
		<tr>
			<td colspan=3>
				<table style="border:1px solid #AAA" class="table">
					<thead>
						<tr>
							<th colspan=3>Начисленные бонусы</th>
						</tr>
						<tr>
							<th>Дата действия</th>
							<th>Сумма</th>
							<th>Действие</th>
						</tr>
					</thead>
					<tbody>
					<%for i, payment in enumerate(agent.GetBunosesForInterval(interval)): %>
						<tr>
							<td>${payment.RegistrationDate.ToShortDateString()}</td>
							<td>${payment.Sum}</td>
							<td>${payment.Comment}</td>
						</tr>
					<%end %>
					</tbody>
				</table>
			</td>
		</tr>
		<tr>
			<td colspan=3>
				<table style="border:1px solid #AAA" class="table">
					<thead>
						<tr>
							<th colspan=3>Пересчитанные бонусы</th>
						</tr>
						<tr>
							<th>Дата действия</th>
							<th>Сумма</th>
							<th>Действие</th>
						</tr>
					</thead>
					<tbody>
					<%for i, payment in enumerate(agent.GetPenaltyForInterval(interval)): %>
						<tr>
							<td>${payment.RegistrationDate.ToShortDateString()}</td>
							<td>${payment.Sum}</td>
							<td>${payment.Comment}</td>
						</tr>
					<%end %>
					</tbody>
				</table>
			</td>
		</tr>
		<tr>
			<td style="color:Black"><b> Итого: ${agent.GetAgentPayment()} рублей </b></td>
		</tr>
	<%end %>
	</tbody>
</table>
</div>
<script type="text/javascript">
	$(function () {
		$('.graph_date').datepicker();
	});
</script>
<div style="width:800px; margin:0 auto;">
<table class="table" style="border:1px solid #AAA">
	<thead>
		<tr>
			<th colspan=3>Выплаты по агентам</th>
		</tr>
		<tr>
			<form method=get>
				<td>
					<label for="startDate"><b>Начало периода</b></label>
					<input type=text value="${interval.GetStartString()}" name="interval.StartDate" id="startDate" class="graph_date" class="date-pick dp-applied">
				</td>
				<td style="border-right:1px solid #AAA; padding-right:30px;">
					<label for="startDate"><b>Конец периода</b></label>
					<input type=text value="${interval.GetEndString()}" name="interval.EndDate" id="endDate" class="graph_date" class="dp-hover"></div>
				</td>
				<td>
					<button id="showBut" type=submit class="button showpay">Показать</button>
				</td>
			</form>
		</tr>
	</thead>
	<tbody>
	<%for i, agent in enumerate(Agents): %>
		<tr>
			<td colspan=3 style="background-color:#b7d9e8; font-size:18px; font-weight:bold;">${agent.Name} (<b>Итого: ${agent.GetAgentPayment(interval)} рублей</b>)</td>
		</tr>
		<tr>
			<td colspan=3>
				<%payments = agent.GetPaymentsForInterval(interval)
				if (payments.Count != 0): 
					OutputSubView("""\AgentInfo\PaymentBlock""", {
					"payments": payments,
					"message": """Начисления за текущий период""" }) 
				else:
					output  WriteMessageError("""Нет начислений за текущай период""")
				end%>
			</td>
		</tr>
		<tr>
			<td colspan=3>
				<%payments = agent.GetWriteOffsForInterval(interval)
				if (payments.Count != 0): 
					OutputSubView("""\AgentInfo\PaymentBlock""", {
					"payments": payments,
					"message": """Списания за текущий период""" })
				else:
					output  WriteMessageError("""Нет списаний за выбранный период""")
				end%>
			</td>
		</tr>
		<tr>
			<td colspan=3>
				<%payments = agent.GetBunosesForInterval(interval) 
				if (payments.Count != 0): 
					OutputSubView("""\AgentInfo\PaymentBlock""", {
					"payments": payments,
					"message": """Начисленные бонусы""" })
				else:
					output  WriteMessageError("""Нет бонусов за выбранный период""")
				end%>
			</td>
		</tr>
		<tr>
			<td colspan=3>
				<%payments = agent.GetPenaltyForInterval(interval)
				if (payments.Count != 0): 
					OutputSubView("""\AgentInfo\PaymentBlock""", {
					"payments": payments,
					"message": """Пересчитанные бонусы""" })
				else:
					output  WriteMessageError("""Бонусы не пересчитывались""")
				end%>
			</td>
		</tr>
	<%end %>
	</tbody>
</table>
</div>